{
    "servicePath": "/=Zenoss",
    "serviceDefinition": {
        "Actions": {
            "debug": "su - zenoss -c '${ZENHOME:-/opt/zenoss}/bin/{{.Name}} debug'",
            "stats": "su - zenoss -c '${ZENHOME:-/opt/zenoss}/bin/{{.Name}} stats'"
        },
        "Command": "su - zenoss -c \"/opt/zenoss/bin/zenmapper run -c --logfileonly\"",
        "ConfigFiles": {
            "/opt/zenoss/etc/global.conf": {
                "Content": "# Generated by serviced\n{{range $k,$v:=contextFilter . \"global.conf.\"}}{{$k}} {{$v}}\n{{end}}",
                "Filename": "/opt/zenoss/etc/global.conf",
                "Owner": "zenoss:zenoss",
                "Permissions": "660"
            },
            "/opt/zenoss/etc/zenmapper.conf": {
                "Filename": "/opt/zenoss/etc/zenmapper.conf",
                "Owner": "zenoss:zenoss",
                "Permissions": "0664"
            }
        },
        "Description": "Updates network map connections.",
        "Endpoints": [
            {
                "Name": "mariadb",
                "Application": "zodb_.*",
                "Purpose": "import"
            },
            {
                "Name": "memcached",
                "Application": "memcached",
                "PortNumber": 11211,
                "Protocol": "tcp",
                "Purpose": "import"
            },
            {
                "Name": "redis",
                "Application": "redis",
                "PortNumber": 6379,
                "Protocol": "tcp",
                "Purpose": "import"
            },
            {
                "Name": "rabbitmq",
                "Application": "rabbitmq",
                "PortNumber": 5672,
                "Protocol": "tcp",
                "Purpose": "import"
            },
            {
                "Application": "controlplane_consumer",
                "Name": "controlplane_consumer",
                "PortNumber": 8444,
                "Protocol": "tcp",
                "Purpose": "import"
            }
        ],
        "HealthChecks": {
            "running": {
                "Script": "pgrep -fu zenoss zenmapper.py > /dev/null",
                "Interval": 5.0
            }
        },
        "ImageID": "",
        "Instances": {
            "min": 1
        },
        "Launch": "auto",
        "LogConfigs": [{
            "filters": [
                "pythondaemon"
            ],
            "path": "/opt/zenoss/log/zenmapper.log",
            "type": "zenmapper"
        }],
        "Name": "zenmapper",
        "Prereqs": [
            {
                "Name": "MariaDB connectivity",
                "Script": "su - zenoss -c '/opt/zenoss/bin/python /opt/zenoss/Products/ZenUtils/ZenDB.py --usedb zodb --execsql=\";\"'"
            }
        ],
        "RAMCommitment": "2G",
        "Tags": [
            "daemon",
            "ZenPacks.zenoss.Layer2"
        ]
    }
}
